(()=>{"use strict";var e={780:e=>{e.exports=require("iframe-resizer")},252:e=>{e.exports=require("iframe-resizer/js/iframeResizer.contentWindow")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{initializeExtensionService:()=>g});const e=require("tslib"),t=function(t){function n(e){var n=t.call(this,e||"Invalid arguments have been provided.")||this;return n.name="InvalidArgumentError",n.type="invalid_argument",n}return(0,e.__extends)(n,t),n}(function(t){function n(e){var n,r,i=this.constructor,o=t.call(this,e||"An unexpected error has occurred.")||this;return o.name="StandardError",o.type="standard",n=o,r=i.prototype,Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(o,i):o.stack=new Error(o.message).stack,o}return(0,e.__extends)(n,t),n}(Error));function i(e){if(!/^(https?:)?\/\//.test(e))throw new t("The provided URL must be absolute.");var n=document.createElement("a");n.href=e;var r=n.port&&-1!==e.indexOf(n.hostname+":"+n.port)?n.port:"";return{hash:n.hash,hostname:n.hostname,href:n.href,origin:n.protocol+"//"+n.hostname+(r?":"+r:""),pathname:n.pathname,port:r,protocol:n.protocol,search:n.search}}const o=function(t,n,r){return n&&r?s(0,n,r):function(t){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return(0,e.__extends)(n,t),n}(t);return Object.getOwnPropertyNames(t.prototype).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t.prototype,e);r&&"constructor"!==e&&Object.defineProperty(n.prototype,e,s(t.prototype,e,r))})),n}(t)};function s(t,n,r){if("function"!=typeof r.value)return r;var i=r.value;return{get:function(){var t=i.bind(this);return Object.defineProperty(this,n,(0,e.__assign)((0,e.__assign)({},r),{value:t})),t},set:function(e){i=e}}}function a(e,t){return e.type===t}const p=function(){function t(e){var t;this._sourceOrigins=[i(e).origin,(t=i(e),i(0===t.hostname.indexOf("www")?t.href:t.href.replace(t.hostname,"www."+t.hostname))).origin],this._isListening=!1,this._listeners={}}return t.prototype.listen=function(){this._isListening||(this._isListening=!0,window.addEventListener("message",this._handleMessage))},t.prototype.stopListen=function(){this._isListening&&(this._isListening=!1,window.removeEventListener("message",this._handleMessage))},t.prototype.addListener=function(e,t){var n=this._listeners[e];n||(this._listeners[e]=n=[]),-1===n.indexOf(t)&&n.push(t)},t.prototype.removeListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);r>=0&&n.splice(r,1)}},t.prototype.trigger=function(e){var t=this._listeners[e.type];t&&t.forEach((function(t){return t(e)}))},t.prototype._handleMessage=function(e){-1!==this._sourceOrigins.indexOf(e.origin)&&a(e.data,e.data.type)&&this.trigger(e.data)},(0,e.__decorate)([o],t.prototype,"_handleMessage",null),t}(),u=require("rxjs"),c=require("rxjs/operators"),d=function(){function e(e,t){this._targetWindow=t,this._targetOrigin="*"===e?"*":i(e).origin}return e.prototype.post=function(e,t){var n=this,r=this._targetWindow;if(window!==r){if(!r)throw new Error("Unable to post message because target window is not set.");var i=t&&(0,u.fromEvent)(window,"message").pipe((0,c.filter)((function(e){return e.origin===n._targetOrigin&&a(e.data,e.data.type)&&-1!==[t.successType,t.errorType].indexOf(e.data.type)})),(0,c.map)((function(e){if(t.errorType===e.data.type)throw e.data;return e.data})),(0,c.take)(1)).toPromise();return r.postMessage(e,this._targetOrigin),i}},e.prototype.setTarget=function(e){this._targetWindow=e},e}();var h,f;!function(e){e.ConsignmentsChanged="EXTENSION:CONSIGNMENTS_CHANGED"}(h||(h={})),function(e){e.FRAME_LOADED="FRAME_LOADED",e.RELOAD_CHECKOUT="RELOAD_CHECKOUT",e.SET_IFRAME_STYLE="SET_IFRAME_STYLE",e.SHOW_LOADING_INDICATOR="SHOW_LOADING_INDICATOR"}(f||(f={}));const _=require("lodash");var l;!function(e){e.Subscribe="EXTENSION_INTERNAL:SUBSCRIBE",e.Unsubscribe="EXTENSION_INTERNAL:UNSUBSCRIBE"}(l||(l={}));const v=function(){function t(e,t,n){this._eventListener=e,this._eventPoster=t,this._internalEventPoster=n,this._eventPoster.setTarget(window.parent),this._internalEventPoster.setTarget(window.parent)}return t.prototype.initialize=function(e){if(!e)throw new Error("Extension Id not found.");this._extensionId=e,this._eventListener.listen()},t.prototype.post=function(t){if(this._extensionId){if(!Object.values(f).includes(t.type))throw new Error(t.type+" is not supported.");var n=(0,e.__assign)((0,e.__assign)({},t.payload),{extensionId:this._extensionId});this._eventPoster.post((0,e.__assign)((0,e.__assign)({},t),{payload:n}))}},t.prototype.addListener=function(e,t){var n=this;if(void 0===t&&(t=_.noop),!this._extensionId)throw new Error("Extension is not initialized.");var r=this._extensionId;if(!Object.values(h).includes(e))throw new Error(e+" is not supported.");return this._internalEventPoster.post({type:l.Subscribe,payload:{extensionId:r,eventType:e}}),this._eventListener.addListener(e,t),function(){n._internalEventPoster.post({type:l.Unsubscribe,payload:{extensionId:r,eventType:e}}),n._eventListener.removeListener(e,t)}},t}();function g(e){var t=e.extensionId,r=e.parentOrigin;n(252);var i=new v(new p(r),new d(r),new d(r));return i.initialize(t),i.post({type:f.FRAME_LOADED,payload:{extensionId:t}}),i}})(),module.exports=r})();
//# sourceMappingURL=extension.js.map